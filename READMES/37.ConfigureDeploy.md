# Configure & Deploy with Prisma 

---------------------------------

In order to setup our production server we'll need to deploy our datamodel to that server, in order to do that we'll need to make some adjustments to our application:

`prisma/prisma.yml`: (current):

```js
endpoint: http://192.168.99.100:4466
datamodel: datamodel.graphql
secret: thisismysupersecrettext 
```

> prisma refers to this file when deploying,  - currently we're deploying to our local docker instance based on our currently configured endpoint. 



### setup dynamic production endpoint:

We'll use `env` variables to help us dictate which endpoint we want prisma to deploy to when deploying, to set that up we'll create two `.env` files, one for our the values needed to deploy to `heroku-prod` and the other to deploy to our local docker container. 

> create: `prisma/config/`
>
> - `dev.env`
> - `prod.env`





Let's make sure our dev environment gets setup properly before we setup the new production database: `prisma/config/dev.env`:

```js
PRISMA_ENDPOINT=http://192.168.99.100:4466
```



Now we can let prisma know to use our newly defined `.env` value for our endpoint:

`prisma/prisma.yml`

```js
endpoint: ${env:PRISMA_ENDPOINT}

datamodel: datamodel.graphql
secret: thisismysupersecrettext
```



Before we redploy our database, we need to redeploy our local container:

```shell
graph-new/prisma on  master [!?] 

➜ docker-compose up -d
```



Now instead of running `prisma deploy` we can instead specify the variables we want the command to use:

```shell
graph-new/prisma on  master [!?] 

➜  prisma deploy -e ../config/dev.env
```

> file path is relative to the `prisma/` since the command is run from that directory.

Since we've already deployed to our container we should just see a message that says "Service is already up to date":

```js
Deploying service `default` to stage `default` to server `default` 1.2s
Service is already up to date.
```



